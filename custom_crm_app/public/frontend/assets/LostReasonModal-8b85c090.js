import{_ as V}from"./Link-a9220984.js";import{c as h}from"./FieldLayout-2174b480.js";import{L,M,l as d,r as c,b as f,g as B,w as g,e as o,t as m,Q as C,d as u,c as R,A as w,u as N,S as D}from"./index-cabbcd3b.js";const O={class:"-mt-3 mb-4 text-p-base text-ink-gray-7"},q={class:"flex flex-col gap-3"},E={class:"mb-2 text-sm text-ink-gray-5"},S={class:"mb-2 text-sm text-ink-gray-5"},j={key:0,class:"text-ink-red-2"},F={class:"flex justify-between items-center gap-2"},A={class:"flex gap-2"},U={__name:"LostReasonModal",props:L({deal:{type:Object,required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(v){const t=v,i=M(v,"modelValue"),a=d(t.deal.doc.lost_reason||""),l=d(t.deal.doc.lost_notes||""),n=d("");function _(){i.value=!1,n.value="",a.value="",l.value="",t.deal.doc.status=t.deal.originalDoc.status}function b(){if(!a.value){n.value=__("Lost reason is required");return}if(a.value==="Other"&&!l.value){n.value=__('Lost notes are required when lost reason is "Other"');return}n.value="",i.value=!1,t.deal.doc.lost_reason=a.value,t.deal.doc.lost_notes=l.value,t.deal.save.submit()}function x(s,e){h("CRM Lost Reason",s,e)}return(s,e)=>{const k=c("FormControl"),y=c("ErrorMessage"),p=c("Button");return f(),B(N(D),{modelValue:i.value,"onUpdate:modelValue":e[2]||(e[2]=r=>i.value=r),options:{title:s.__("Lost reason")},onClose:_},{"body-content":g(()=>[o("div",O,m(s.__("Please provide a reason for marking this deal as lost")),1),o("div",q,[o("div",null,[o("div",E,[C(m(s.__("Lost reason"))+" ",1),e[3]||(e[3]=o("span",{class:"text-ink-red-2"},"*",-1))]),u(V,{class:"form-control flex-1 truncate",value:a.value,doctype:"CRM Lost Reason",onChange:e[0]||(e[0]=r=>a.value=r),onCreate:x},null,8,["value"])]),o("div",null,[o("div",S,[C(m(s.__("Lost notes"))+" ",1),a.value=="Other"?(f(),R("span",j,"*")):w("",!0)]),u(k,{class:"form-control flex-1 truncate",type:"textarea",value:l.value,onChange:e[1]||(e[1]=r=>l.value=r.target.value)},null,8,["value"])])])]),actions:g(()=>[o("div",F,[o("div",null,[u(y,{message:n.value},null,8,["message"])]),o("div",A,[u(p,{label:s.__("Cancel"),onClick:_},null,8,["label"]),u(p,{variant:"solid",label:s.__("Save"),onClick:b},null,8,["label"])])])]),_:1},8,["modelValue","options"])}}};export{U as _};
//# sourceMappingURL=LostReasonModal-8b85c090.js.map
