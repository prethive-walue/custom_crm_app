import{_ as v}from"./LayoutHeader-14d19c20.js";import{W as b}from"./WhatsAppIcon-3b99719c.js";import{M}from"./MarkAsDoneIcon-b8b97d5f.js";import{n as N,a as c,N as B}from"./notifications-37630192.js";import{_ as w,t as C}from"./index-98a0eb06.js";import{g as L}from"./global-f8b0dbce.js";import{_ as I}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-5a4bffc5.js";import{o as $,a as z,r as u,b as o,c as s,d as l,w as m,e as a,u as n,F as p,f as A,t as i,g as _,n as D}from"./index-a3e8239b.js";import"./dayjs-de744307.js";import"../node_modules/frappe-ui/src/resources/listResource.js";const R={class:"flex flex-col overflow-hidden text-ink-gray-9"},S={key:0,class:"divide-y divide-outline-gray-1 overflow-y-auto text-base"},W={class:"mt-1 flex items-center gap-2.5"},F=["innerHTML"],H={key:1,class:"mb-2 space-x-1 leading-5 text-ink-gray-5"},T={class:"font-medium text-ink-gray-9"},V={class:"font-medium text-ink-gray-9"},j={class:"text-sm text-ink-gray-5"},E={key:1,class:"flex flex-1 flex-col items-center justify-center gap-2"},U={class:"text-lg font-medium text-ink-gray-4"},oe={__name:"MobileNotification",setup(q){const{$socket:d}=L(),{mark_as_read:g,mark_doc_as_read:k}=N();$(()=>{d.off("crm_notification")}),z(()=>{d.on("crm_notification",()=>{c.reload()})});function y(e){let r={leadId:e.reference_name};return e.route_name==="Deal"&&(r={dealId:e.reference_name}),{name:e.route_name,params:r,hash:"#"+e.comment||e.notification_type_doc}}return(e,r)=>{var f;const h=u("Button"),x=u("RouterLink");return o(),s(p,null,[l(v,null,{"left-header":m(()=>[l(n(I),{items:[{label:e.__("Notifications"),route:{name:"Notifications"}}]},null,8,["items"])]),"right-header":m(()=>[l(h,{tooltip:e.__("Mark all as read"),label:e.__("Mark all as read"),iconLeft:M,onClick:r[0]||(r[0]=()=>n(g).reload())},null,8,["tooltip","label"])]),_:1}),a("div",R,[(f=n(c).data)!=null&&f.length?(o(),s("div",S,[(o(!0),s(p,null,A(n(c).data,t=>(o(),_(x,{key:t.comment,to:y(t),class:"flex cursor-pointer items-start gap-3 px-2.5 py-3 hover:bg-surface-gray-2",onClick:G=>n(k)(t.comment||t.notification_type_doc)},{default:m(()=>[a("div",W,[a("div",{class:D(["size-[5px] rounded-full",[t.read?"bg-transparent":"bg-surface-gray-7"]])},null,2),t.type=="WhatsApp"?(o(),_(b,{key:0,class:"size-7"})):(o(),_(w,{key:1,user:t.from_user.name,size:"lg"},null,8,["user"]))]),a("div",null,[t.notification_text?(o(),s("div",{key:0,innerHTML:t.notification_text},null,8,F)):(o(),s("div",H,[a("span",T,i(t.from_user.full_name),1),a("span",null,i(e.__("mentioned you in {0}",[t.reference_doctype])),1),a("span",V,i(t.reference_name),1)])),a("div",j,i(e.__(n(C)(t.creation))),1)])]),_:2},1032,["to","onClick"]))),128))])):(o(),s("div",E,[l(B,{class:"h-20 w-20 text-ink-gray-2"}),a("div",U,i(e.__("No new notifications")),1)]))])],64)}}};export{oe as default};
//# sourceMappingURL=MobileNotification-981c58c8.js.map
