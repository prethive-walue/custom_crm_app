import{L as h,W as D,M as _,x as L,X as I,y as T,l as q,r as x,b as o,c as m,d as n,w as d,u as r,F as V,f as H,g as c,n as v,A as p,U as N,e as P,t as A,Y as S}from"./index-a3e8239b.js";import{H as B,_ as O}from"./ListBulkActions-ab2a2653.js";import{P as j}from"./PhoneIcon-58ab8bcd.js";import{_ as E}from"./DeleteLinkedDocModal-fb988008.js";import{L as J,a as X,b as Y,c as G,d as K}from"./ListView-b8b2188c.js";import{a as F}from"./index-98a0eb06.js";import{L as Q}from"./ListFooter-af9aa9de.js";import{D as Z}from"./dayjs-de744307.js";const ee={key:0},te={key:1},oe={key:2},se=["onClick"],le={key:1},ae={key:2},ie=["onClick"],ye={__name:"ContactsListView",props:h({rows:{type:Array,required:!0},columns:{type:Array,required:!0},options:{type:Object,default:()=>({selectable:!0,showTooltip:!0,resizeColumn:!1,totalCount:0,rowCount:0})}},{modelValue:{},modelModifiers:{},list:{},listModifiers:{}}),emits:h(["loadMore","updatePageCount","columnWidthUpdated","applyFilter","applyLikeFilter","likeDoc","selectionsChanged"],["update:modelValue","update:list"]),setup(a,{expose:M,emit:U}){const u=U,g=D(),k=_(a,"modelValue"),y=_(a,"list"),$=L(()=>{var s,t;return!!((t=(s=y.value.params)==null?void 0:s.filters)!=null&&t._liked_by)}),{user:z}=I();function b(s){if(s)return JSON.parse(s).includes(z)}T(k,(s,t)=>{s!==t&&u("updatePageCount",s)});const f=q(null);return M({customListActions:L(()=>{var s;return(s=f.value)==null?void 0:s.customListActions})}),(s,t)=>{const C=x("Button"),W=x("FormControl");return o(),m(V,null,[n(r(K),{class:v(s.$attrs.class),columns:a.columns,rows:a.rows,options:{getRowRoute:e=>({name:"Contact",params:{contactId:e.name},query:{view:r(g).query.view,viewType:r(g).params.viewType}}),selectable:a.options.selectable,showTooltip:a.options.showTooltip,resizeColumn:a.options.resizeColumn},"row-key":"name","onUpdate:selections":t[2]||(t[2]=e=>u("selectionsChanged",e))},{default:d(()=>[n(r(J),{class:"mx-3 sm:mx-5",onColumnWidthUpdated:t[1]||(t[1]=e=>u("columnWidthUpdated"))},{default:d(()=>[(o(!0),m(V,null,H(a.columns,e=>(o(),c(r(X),{key:e.key,item:e,onColumnWidthUpdated:i=>u("columnWidthUpdated",e)},{default:d(()=>[e.key=="_liked_by"?(o(),c(C,{key:0,variant:"ghosted",class:v(["!h-4",$.value?"fill-red-500":"fill-white"]),onClick:t[0]||(t[0]=()=>u("applyLikeFilter"))},{default:d(()=>[n(B,{class:"h-4 w-4"})]),_:1},8,["class"])):p("",!0)]),_:2},1032,["item","onColumnWidthUpdated"]))),128))]),_:1}),n(E,{class:"mx-3 sm:mx-5",rows:a.rows,doctype:"Contact"},{default:d(({idx:e,column:i,item:l})=>[n(r(Y),{item:l,align:i.align},{prefix:d(()=>[i.key==="full_name"?(o(),m("div",ee,[l.label?(o(),c(r(F),{key:0,class:"flex items-center",image:l.image,label:l.image_label,size:"sm"},null,8,["image","label"])):p("",!0)])):i.key==="company_name"?(o(),m("div",te,[l.label?(o(),c(r(F),{key:0,class:"flex items-center",image:l.logo,label:l.label,size:"sm"},null,8,["image","label"])):p("",!0)])):i.key==="mobile_no"?(o(),m("div",oe,[n(j,{class:"h-4 w-4"})])):p("",!0)]),default:d(({label:R})=>[["modified","creation"].includes(i.key)?(o(),m("div",{key:0,class:"truncate text-base",onClick:w=>u("applyFilter",{event:w,idx:e,column:i,item:l,firstColumn:a.columns[0]})},[n(r(N),{text:l.label},{default:d(()=>[P("div",null,A(l.timeAgo),1)]),_:2},1032,["text"])],8,se)):i.type==="Check"?(o(),m("div",le,[n(W,{type:"checkbox",modelValue:l,disabled:!0,class:"text-ink-gray-9"},null,8,["modelValue"])])):i.key==="_liked_by"?(o(),m("div",ae,[i.key=="_liked_by"?(o(),c(C,{key:0,variant:"ghosted",class:v(b(l)?"fill-red-500":"fill-white"),onClick:S(()=>u("likeDoc",{name:s.row.name,liked:b(l)}),["stop","prevent"])},{default:d(()=>[n(B,{class:"h-4 w-4"})]),_:1},8,["class","onClick"])):p("",!0)])):(o(),m("div",{key:3,class:"truncate text-base",onClick:w=>u("applyFilter",{event:w,idx:e,column:i,item:l,firstColumn:a.columns[0]})},A(R),9,ie))]),_:2},1032,["item","align"])]),_:1},8,["rows"]),n(r(G),null,{actions:d(({selections:e,unselectAll:i})=>[n(r(Z),{options:f.value.bulkActions(e,i)},{default:d(()=>[n(C,{icon:"more-horizontal",variant:"ghost"})]),_:1},8,["options"])]),_:1})]),_:1},8,["class","columns","rows","options"]),k.value?(o(),c(r(Q),{key:0,class:"border-t px-3 py-2 sm:px-5",modelValue:k.value,"onUpdate:modelValue":t[3]||(t[3]=e=>k.value=e),options:{rowCount:a.options.rowCount,totalCount:a.options.totalCount},onLoadMore:t[4]||(t[4]=e=>u("loadMore"))},null,8,["modelValue","options"])):p("",!0),n(O,{ref_key:"listBulkActionsRef",ref:f,modelValue:y.value,"onUpdate:modelValue":t[5]||(t[5]=e=>y.value=e),doctype:"Contact",options:{hideAssign:!0}},null,8,["modelValue"])],64)}}};export{ye as _};
//# sourceMappingURL=ContactsListView-f30ced9e.js.map
