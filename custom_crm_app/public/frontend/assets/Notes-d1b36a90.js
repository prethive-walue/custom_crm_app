import{V as $,l as u,y as B,r as F,b as n,c as p,d as l,w as _,e as s,F as k,f as P,A as V,g as b,u as r,t as v,Y as D,U as j,a0 as R}from"./index-a3e8239b.js";import{_ as S}from"./ViewBreadcrumbs-772e4ab3.js";import{_ as z}from"./LayoutHeader-14d19c20.js";import{_ as A,t as E,f as I}from"./index-98a0eb06.js";import{_ as Y,N as q}from"./NoteModal-ca2fb0bc.js";import{_ as G}from"./ViewControls-7d016562.js";import{_ as H}from"./settings-c75a63ab.js";import{L as J}from"./ListFooter-af9aa9de.js";import{D as K}from"./dayjs-de744307.js";import"../node_modules/frappe-ui/src/resources/listResource.js";import"./Icon-c9812454.js";import"./ArrowUpRightIcon-afcc694f.js";import"./onboarding-47f442cf.js";import"./FadedScrollableDiv-143e35ae.js";import"./Link-ce253979.js";import"./DragVerticalIcon-cbd80dc8.js";import"./RefreshIcon-de37e5fb.js";import"./IconPicker-ae1e34a3.js";import"./PinIcon-7b40a90c.js";import"./DateRangePicker.vue_vue_type_script_setup_true_lang-d67000b7.js";import"./DetailsIcon-a948fc9a.js";import"./global-f8b0dbce.js";import"./pageMeta-155cb5a4.js";import"./plus-d2d9d364.js";import"./TabButtons-71b5ed70.js";import"./description-7db9d20b.js";const O={class:"flex-1 overflow-y-auto"},Q={key:0,class:"grid grid-cols-1 gap-2 px-3 pb-2 sm:grid-cols-4 sm:gap-4 sm:px-5 sm:pb-3"},T=["onClick"],W={class:"flex items-center justify-between"},X={class:"truncate text-lg font-medium text-ink-gray-9"},Z={class:"mt-2 flex items-center justify-between gap-2"},ee={class:"flex items-center gap-2"},te={class:"text-sm text-ink-gray-8"},oe={class:"text-sm text-ink-gray-7"},ae={key:1,class:"flex h-full items-center justify-center"},le={class:"flex flex-col items-center gap-3 text-xl font-medium text-ink-gray-4"},Pe={__name:"Notes",setup(se){const{getUser:U}=$(),c=u(!1),g=u(null),a=u({}),w=u(1),x=u(20),N=u(null);B(()=>{var o,e;return(e=(o=a.value)==null?void 0:o.data)==null?void 0:e.page_length_count},(o,e)=>{L(),!(!o||o===e)&&(x.value=o)});function h(){g.value={title:"",content:""},c.value=!0}function y(o){g.value=o,c.value=!0}async function M(o){await R("frappe.client.delete",{doctype:"FCRM Note",name:o}),a.value.reload()}const L=()=>{var i,d;const o=new URLSearchParams(window.location.search),e=o.get("open");if(e&&((d=(i=a.value)==null?void 0:i.data)!=null&&d.data)){const m=a.value.data.data.find(f=>f.name===e);m&&y(m),o.delete("open"),window.history.replaceState(null,"",window.location.pathname)}};return(o,e)=>{var d,m,f,C;const i=F("Button");return n(),p(k,null,[l(z,null,{"left-header":_(()=>[l(S,{modelValue:N.value,"onUpdate:modelValue":e[0]||(e[0]=t=>N.value=t),routeName:"Notes"},null,8,["modelValue"])]),"right-header":_(()=>[l(i,{variant:"solid",label:o.__("Create"),iconLeft:"plus",onClick:h},null,8,["label"])]),_:1}),l(G,{ref_key:"viewControls",ref:N,modelValue:a.value,"onUpdate:modelValue":e[1]||(e[1]=t=>a.value=t),loadMore:w.value,"onUpdate:loadMore":e[2]||(e[2]=t=>w.value=t),updatedPageCount:x.value,"onUpdate:updatedPageCount":e[3]||(e[3]=t=>x.value=t),doctype:"FCRM Note",options:{hideColumnsButton:!0,defaultViewName:o.__("Notes View")}},null,8,["modelValue","loadMore","updatedPageCount","options"]),s("div",O,[(m=(d=a.value.data)==null?void 0:d.data)!=null&&m.length?(n(),p("div",Q,[(n(!0),p(k,null,P(a.value.data.data,t=>(n(),p("div",{class:"group flex h-56 cursor-pointer flex-col justify-between gap-2 rounded-lg border px-5 py-4 shadow-sm hover:bg-surface-menu-bar",onClick:ne=>y(t)},[s("div",W,[s("div",X,v(t.title),1),l(r(K),{options:[{label:o.__("Delete"),icon:"trash-2",onClick:()=>M(t.name)}]},{default:_(()=>[l(i,{icon:"more-horizontal",variant:"ghosted",class:"hover:bg-surface-white",onClick:e[4]||(e[4]=D(()=>{},["stop"]))})]),_:1},8,["options"])]),t.content?(n(),b(r(H),{key:0,content:t.content,editable:!1,"editor-class":"prose-sm text-p-sm max-w-none text-ink-gray-5 focus:outline-none",class:"flex-1 overflow-hidden"},null,8,["content"])):V("",!0),s("div",Z,[s("div",ee,[l(A,{user:t.owner,size:"xs"},null,8,["user"]),s("div",te,v(r(U)(t.owner).full_name),1)]),l(r(j),{text:r(I)(t.modified)},{default:_(()=>[s("div",oe,v(o.__(r(E)(t.modified))),1)]),_:2},1032,["text"])])],8,T))),256))])):V("",!0)]),(C=(f=a.value.data)==null?void 0:f.data)!=null&&C.length?(n(),b(r(J),{key:0,class:"border-t px-3 py-2 sm:px-5",modelValue:a.value.data.page_length_count,"onUpdate:modelValue":e[5]||(e[5]=t=>a.value.data.page_length_count=t),options:{rowCount:a.value.data.row_count,totalCount:a.value.data.total_count},onLoadMore:e[6]||(e[6]=()=>w.value++)},null,8,["modelValue","options"])):(n(),p("div",ae,[s("div",le,[l(q,{class:"h-10 w-10"}),s("span",null,v(o.__("No {0} Found",[o.__("Notes")])),1),l(i,{label:o.__("Create"),iconLeft:"plus",onClick:h},null,8,["label"])])])),l(Y,{modelValue:c.value,"onUpdate:modelValue":e[7]||(e[7]=t=>c.value=t),reloadNotes:a.value,"onUpdate:reloadNotes":e[8]||(e[8]=t=>a.value=t),note:g.value},null,8,["modelValue","reloadNotes","note"])],64)}}};export{Pe as default};
//# sourceMappingURL=Notes-d1b36a90.js.map
