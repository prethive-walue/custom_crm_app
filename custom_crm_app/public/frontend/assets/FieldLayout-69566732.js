import{e as Ve,d as Q,u as Ye,b as Pe,_ as qe}from"./modals-3c1f9e01.js";import{D as oe,b as $e,E as ye,d as Se,_ as De}from"./DragVerticalIcon-cbd80dc8.js";import{I as ze}from"./IndicatorIcon-6cac9012.js";import{b as re,g as ie,_ as ce,q as me,r as Z,y as He,p as xe}from"./index-98a0eb06.js";import{L as ee,M as le,l as E,x as j,r as J,b as t,c as V,e as y,F as te,f as ae,g as v,w as $,d as x,Y as K,aK as fe,A as R,E as ge,t as G,u as l,aT as Ke,S as Fe,T as _e,y as Re,n as Y,J as We,K as Qe,Q as pe,a as Xe,aI as Ze,a9 as el,a0 as ll,ai as tl,V as be,_ as he,k as q,G as H,p as al,ae as ve,B as Ce,R as ue,U as Le,a6 as Oe,ah as nl,ag as ol}from"./index-a3e8239b.js";import{_ as de,a as Me}from"./Link-ce253979.js";import{D as we,d as ne}from"./dayjs-de744307.js";const sl={class:"group flex flex-wrap gap-1 min-h-20 p-1.5 rounded text-base bg-surface-gray-2 hover:bg-surface-gray-3 focus:border-outline-gray-4 focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3 text-ink-gray-8 transition-colors w-full"},il={class:"w-full"},rl=["onClick"],dl={__name:"TableMultiselectInput",props:ee({doctype:{type:String,required:!0},errorMessage:{type:Function,default:f=>`${f} is an Invalid value`}},{modelValue:{type:Array,default:()=>[]},modelModifiers:{}}),emits:ee(["change"],["update:modelValue"]),setup(f,{emit:c}){const n=f,S=c,{getFields:N}=re(n.doctype),D=le(f,"modelValue"),M=E([]),L=E(null),U=E(""),O=E(""),w=j(()=>O.value?{name:["not in",k.value]}:[]),k=j(()=>(L.value="",u(),O.value?D.value.map(d=>d[O.value.fieldname]):[])),u=()=>{if(L.value="",!O.value){let d=N();O.value=d==null?void 0:d.find(r=>["Link","User"].includes(r.fieldtype)),O.value||(L.value="Table MultiSelect requires a Table with atleast one Link field")}return O.value},e=d=>{if(L.value=null,D.value.some(r=>r[O.value.fieldname]===d)){L.value="Value already exists";return}d&&(D.value.push({[O.value.fieldname]:d}),S("change",D.value),!L.value&&(U.value=""))},F=d=>{let r=D.value.filter(_=>_[O.value.fieldname]!==d);S("change",r)},g=()=>{var r;if(U.value)return;let d=(r=M.value[M.value.length-1])==null?void 0:r.$el;document.activeElement===d?(D.value.pop(),S("change",D.value),ge(()=>{D.value.length&&(d=M.value[M.value.length-1].$el,d==null||d.focus())})):d==null||d.focus()};return(d,r)=>{const _=J("FeatherIcon"),s=J("Button"),a=J("ErrorMessage");return t(),V("div",null,[y("div",sl,[(t(!0),V(te,null,ae(k.value,C=>(t(),v(s,{ref_for:!0,ref_key:"valuesRef",ref:M,key:C,label:C,theme:"gray",variant:"subtle",class:"rounded bg-surface-white hover:!bg-surface-gray-1 focus-visible:ring-outline-gray-4",onKeydownCapture:fe(K(g,["stop"]),["delete"])},{suffix:$(()=>[x(_,{class:"h-3.5",name:"x",onClick:K(T=>F(C),["stop"])},null,8,["onClick"])]),_:2},1032,["label","onKeydownCapture"]))),128)),y("div",il,[O.value?(t(),v(de,{key:0,class:"form-control flex-1 truncate cursor-text",value:U.value,filters:w.value,doctype:O.value.options,onChange:r[0]||(r[0]=C=>e(C)),hideMe:!0},{target:$(({togglePopover:C})=>[y("button",{class:"w-full h-7 cursor-text",onClick:K(C,["stop"])},null,8,rl)]),_:1},8,["value","filters","doctype"])):R("",!0)])]),L.value?(t(),v(a,{key:0,class:"mt-2 pl-2",message:L.value},null,8,["message"])):R("",!0)])}}},ul={class:"flex items-center gap-2 text-2xl font-semibold leading-6 text-ink-gray-9"},cl={class:"mt-4"},ml={class:"text-base text-ink-gray-8 mb-2"},pl={class:"px-1 py-0.5 bg-surface-gray-2 border border-outline-gray-modals rounded text-base text-ink-gray-8 flex items-center justify-between gap-2"},vl={class:"flex items-center gap-2"},fl={class:"flex items-center gap-2"},yl={class:"flex flex-col gap-1 text-ink-gray-9"},gl={class:"text-ink-gray-4 text-sm"},_l={class:"flex items-center gap-2 justify-end"},bl={__name:"GridFieldsEditorModal",props:ee({doctype:String,parentDoctype:String},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(f){const c=f,{getFields:n,getGridViewSettings:S,saveUserSettings:N}=re(c.doctype),D=le(f,"modelValue"),M=E(!1),L=E(null),U=j(()=>JSON.stringify(w.value)!==JSON.stringify(O.value)),O=j(()=>{let r=n(),_=S(c.parentDoctype);return _.length?_.map(s=>{let a=r.find(C=>C.fieldname===s.fieldname);if(a)return a.columns=s.columns,d(a)}):r==null?void 0:r.filter(s=>s.in_list_view).map(s=>d(s))}),w=E(JSON.parse(JSON.stringify(O.value||[]))),k=j(()=>{var r;return(r=n())==null?void 0:r.filter(_=>!w.value.find(s=>s.fieldname===_.fieldname)&&!["Tab Break","Section Break","Column Break","Table"].includes(_.fieldtype))});function u(){w.value=JSON.parse(JSON.stringify(O.value||[]))}function e(r){w.value.push(d(r))}function F(r){const _=w.value.findIndex(s=>s.fieldname===r.fieldname);w.value.splice(_,1)}function g(){M.value=!0;let r=w.value.map(_=>({fieldname:_.fieldname,columns:_.columns}));if(r.length===0){L.value=__("At least one field is required");return}N(c.parentDoctype,"GridView",r,()=>{M.value=!1,D.value=!1})}function d(r){return{label:r.label,fieldname:r.fieldname,fieldtype:r.fieldtype,options:r.options,in_list_view:r.in_list_view,columns:r.columns||2}}return(r,_)=>{const s=J("Badge"),a=J("TextInput"),C=J("Button");return t(),v(l(Fe),{modelValue:D.value,"onUpdate:modelValue":_[1]||(_[1]=T=>D.value=T)},{"body-title":$(()=>[y("h3",ul,[y("div",null,G(r.__("Edit Grid Fields Layout")),1),U.value?(t(),v(s,{key:0,label:r.__("Not Saved"),variant:"subtle",theme:"orange"},null,8,["label"])):R("",!0)])]),"body-content":$(()=>{var T,p;return[y("div",cl,[y("div",ml,G(r.__("Fields Order")),1),(T=O.value)!=null&&T.length?(t(),v(l(oe),{key:0,list:w.value,group:"fields","item-key":"fieldname",class:"flex flex-col gap-1"},{item:$(({element:I})=>[y("div",pl,[y("div",vl,[x($e,{class:"h-3.5 cursor-grab"}),y("div",null,G(I.label),1)]),y("div",fl,[x(a,{variant:"outline",type:"number",modelValue:I.columns,"onUpdate:modelValue":W=>I.columns=W,class:"w-20"},null,8,["modelValue","onUpdate:modelValue"]),x(C,{variant:"ghost",icon:"x",onClick:W=>F(I)},null,8,["onClick"])])])]),_:1},8,["list"])):R("",!0),(p=k.value)!=null&&p.length?(t(),v(Me,{key:1,value:"",options:k.value,onChange:_[0]||(_[0]=I=>e(I))},{target:$(({togglePopover:I})=>[x(C,{class:"w-full mt-2",label:r.__("Add Field"),iconLeft:"plus",onClick:W=>I()},null,8,["label","onClick"])]),"item-label":$(({option:I})=>[y("div",yl,[y("div",null,G(I.label),1),y("div",gl,G(`${I.fieldname} - ${I.fieldtype}`),1)])]),_:1},8,["options"])):R("",!0),L.value?(t(),v(l(Ke),{key:2,class:"mt-3",message:L.value},null,8,["message"])):R("",!0)])]}),actions:$(()=>[y("div",_l,[U.value?(t(),v(C,{key:0,class:"w-full",label:r.__("Reset"),onClick:u},null,8,["label"])):R("",!0),x(C,{class:"w-full",label:r.__("Save"),variant:"solid",onClick:g,loading:M.value,disabled:!U.value},null,8,["label","loading","disabled"])])]),_:1},8,["modelValue"])}}},hl={class:"flex flex-col gap-5.5"},kl={class:"flex items-center gap-2 text-base bg-surface-gray-2 rounded py-2 px-2.5"},xl=["onClick"],Cl=["onDblclick"],wl={key:0,class:"flex items-center gap-2"},Vl={key:1,class:"flex gap-1 items-center"},$l={class:"section flex flex-col gap-1.5 p-2.5 bg-surface-gray-2 rounded cursor-grab"},Sl={class:"flex items-center justify-between"},Dl=["onDblclick"],Fl={key:1,class:"flex gap-2 items-center"},Rl={class:"flex flex-col gap-1.5 flex-1 p-2 border border-dashed border-outline-gray-2 rounded bg-surface-modal cursor-grab"},Ll={class:"field px-2.5 py-2 border border-outline-gray-2 rounded text-base bg-surface-modal text-ink-gray-8 flex items-center leading-4 justify-between gap-2"},Ol={class:"flex items-center gap-2 truncate"},Ml={class:"truncate"},Bl={class:"gap-2 w-full"},Ul={class:"flex flex-col gap-1 text-ink-gray-9"},Tl={class:"text-ink-gray-4 text-sm"},Gl={class:"mt-5.5"},Nl={__name:"FieldLayoutEditor",props:{tabs:Object,doctype:String,onlyRequired:{type:Boolean,default:!1}},setup(f){const c=f,n=E(0),S=j(()=>c.tabs.length==1&&!c.tabs[0].label?"prefix":"default"),N=["Geolocation","Attach","Attach Image","HTML","Signature"],D=j(()=>({doctype:c.doctype,restricted_fieldtypes:N,as_array:!0,only_required:c.onlyRequired})),M=_e({url:"crm.api.doc.get_fields_meta",params:D.value,cache:["fieldsMeta",c.doctype],auto:!0,transform:k=>{var F;let u=["name","owner","creation","modified","modified_by","docstatus","_comments","_user_tags","_assign","_liked_by"],e=[];return(F=c.tabs)==null||F.forEach(g=>{var d;(d=g.sections)==null||d.forEach(r=>{var _;(_=r.columns)==null||_.forEach(s=>{e=e.concat(s.fields)})})}),k.filter(g=>!e.find(d=>d.fieldname===g.fieldname)&&!u.includes(g.fieldname))}});function L(){if(c.tabs.length==1&&!c.tabs[0].label){c.tabs[0].label=__("New Tab");return}c.tabs.push({label:__("New Tab"),name:"tab_"+ie(),sections:[]}),n.value=c.tabs.length?c.tabs.length-1:0}function U(k,u){u&&k.fields.push(u)}function O(k){return[{label:__("Edit"),icon:"edit",onClick:()=>k.editingLabel=!0},{label:__("Remove tab"),icon:"trash-2",onClick:()=>{if(c.tabs.length==1){c.tabs[0].label="";return}c.tabs.splice(n.value,1),n.value=n.value?n.value-1:0}}]}function w(k,u,e){let F=u.columns[u.columns.length-1];return[{group:__("Section"),items:[{label:__("Edit"),icon:"edit",onClick:()=>u.editingLabel=!0},{label:u.collapsible?__("Uncollapsible"):__("Collapsible"),icon:u.collapsible?"chevron-up":"chevron-down",onClick:()=>u.collapsible=!u.collapsible},{label:u.hideLabel?__("Show label"):__("Hide label"),icon:u.hideLabel?"eye":"eye-off",onClick:()=>u.hideLabel=!u.hideLabel},{label:u.hideBorder?__("Show border"):__("Hide border"),icon:"minus",onClick:()=>u.hideBorder=!u.hideBorder},{label:__("Remove section"),icon:"trash-2",onClick:()=>{e.sections.splice(e.sections.indexOf(u),1)},condition:()=>u.editable!==!1},{label:__("Remove and move columns to {0} section",[k==0?__("next"):__("previous")]),icon:"trash-2",onClick:()=>{let g=e.sections[k==0?k+1:k-1];k==0?g.columns=u.columns.concat(g.columns):g.columns=g.columns.concat(u.columns),e.sections.splice(e.sections.indexOf(u),1)},condition:()=>u.editable!==!1&&u.columns.length},{label:__("Move to previous tab"),icon:"corner-up-left",onClick:()=>{c.tabs[n.value-1].sections.push(u),c.tabs[n.value].sections.splice(c.tabs[n.value].sections.indexOf(u),1),n.value-=1},condition:()=>c.tabs[n.value-1]},{label:__("Move to next tab"),icon:"corner-up-right",onClick:()=>{c.tabs[n.value+1].sections.push(u),c.tabs[n.value].sections.splice(c.tabs[n.value].sections.indexOf(u),1),n.value+=1},condition:()=>c.tabs[n.value+1]}]},{group:__("Column"),items:[{label:__("Add column"),icon:"columns",onClick:()=>{u.columns.push({label:"",name:"column_"+ie(),fields:[]})},condition:()=>u.columns.length<4},{label:__("Remove column"),icon:"trash-2",onClick:()=>u.columns.pop(),condition:()=>u.columns.length>1},{label:__("Remove and move fields to previous column"),icon:"trash-2",onClick:()=>{let g=u.columns[u.columns.length-2];g.fields=g.fields.concat(F.fields),u.columns.pop()},condition:()=>u.columns.length>1&&F.fields.length},{label:__("Move to next section"),icon:"corner-up-right",onClick:()=>{e.sections[k+1].columns.push(F),u.columns.pop()},condition:()=>e.sections[k+1]},{label:__("Move to previous section"),icon:"corner-up-left",onClick:()=>{e.sections[k-1].columns.push(F),u.columns.pop()},condition:()=>e.sections[k-1]}]}]}return Re(()=>c.doctype,()=>M.fetch(D.value),{immediate:!0}),(k,u)=>{const e=J("Input"),F=J("Button"),g=J("FeatherIcon");return t(),V("div",hl,[y("div",kl,[f.tabs.length&&f.tabs[n.value].label?(t(),v(l(oe),{key:0,list:f.tabs,"item-key":"name",class:"flex items-center gap-2",onEnd:u[2]||(u[2]=d=>n.value=d.newIndex)},{item:$(({element:d,index:r})=>[y("div",{class:Y(["flex items-center gap-2 cursor-pointer rounded",[n.value==r?"text-ink-gray-9 bg-surface-white shadow-sm":"text-ink-gray-5 hover:text-ink-gray-9 hover:bg-surface-white hover:shadow-sm",d.editingLabel?"p-1":"px-2 py-1"]]),onClick:_=>n.value=r},[y("div",{onDblclick:()=>d.editingLabel=!0},[d.editingLabel?(t(),V("div",Vl,[x(e,{modelValue:d.label,"onUpdate:modelValue":_=>d.label=_,onKeydown:fe(_=>d.editingLabel=!1,["enter"]),onBlur:_=>d.editingLabel=!1,onClick:u[0]||(u[0]=K(()=>{},["stop"]))},null,8,["modelValue","onUpdate:modelValue","onKeydown","onBlur"]),d.editingLabel?(t(),v(F,{key:0,icon:"check",variant:"ghost",onClick:_=>d.editingLabel=!1},null,8,["onClick"])):R("",!0)])):(t(),V("div",wl,G(k.__(d.label)||k.__("Untitled")),1))],40,Cl),d.label&&n.value==r?(t(),v(l(we),{key:0,options:O(d),class:"!h-4",onClick:u[1]||(u[1]=K(()=>{},["stop"]))},{default:$(()=>[x(F,{variant:"ghost",class:"!p-1 !h-4"},{default:$(()=>[x(g,{name:"more-horizontal",class:"h-4"})]),_:1})]),_:1},8,["options"])):R("",!0)],10,xl)]),_:1},8,["list"])):R("",!0),x(F,{variant:"ghost",class:"!h-6.5 !text-ink-gray-5 hover:!text-ink-gray-9",onClick:L,label:k.__("Add Tab")},{[S.value]:$(()=>[x(g,{name:"plus",class:"h-4"})]),_:2},1032,["label"])]),(t(!0),V(te,null,ae(f.tabs,(d,r)=>We((t(),V("div",{key:d.name},[x(l(oe),{list:d.sections,"item-key":"name",class:"flex flex-col gap-5.5"},{item:$(({element:_,index:s})=>[y("div",$l,[y("div",Sl,[y("div",{class:"flex h-7 max-w-fit cursor-pointer items-center gap-2 text-base font-medium leading-4 text-ink-gray-9",onDblclick:()=>_.editingLabel=!0},[_.editingLabel?(t(),V("div",Fl,[x(e,{modelValue:_.label,"onUpdate:modelValue":a=>_.label=a,onKeydown:fe(a=>_.editingLabel=!1,["enter"]),onBlur:a=>_.editingLabel=!1,onClick:u[3]||(u[3]=K(()=>{},["stop"]))},null,8,["modelValue","onUpdate:modelValue","onKeydown","onBlur"]),_.editingLabel?(t(),v(F,{key:0,icon:"check",variant:"ghost",onClick:a=>_.editingLabel=!1},null,8,["onClick"])):R("",!0)])):(t(),V("div",{key:0,class:Y(["flex items-center gap-2",{"text-ink-gray-3":_.hideLabel||!_.label,italic:!_.label}])},[pe(G(k.__(_.label)||k.__("No label"))+" ",1),_.collapsible?(t(),v(g,{key:0,name:"chevron-down",class:"h-4 transition-all duration-300 ease-in-out"})):R("",!0)],2))],40,Dl),x(l(we),{options:w(s,_,d)},{default:$(()=>[x(F,{variant:"ghost"},{default:$(()=>[x(g,{name:"more-horizontal",class:"h-4"})]),_:1})]),_:1},8,["options"])]),x(l(oe),{class:"flex gap-2",list:_.columns,group:"columns","item-key":"name"},{item:$(({element:a})=>[y("div",Rl,[x(l(oe),{list:a.fields,group:"fields","item-key":"fieldname",class:"flex flex-col gap-1.5",handle:".cursor-grab"},{item:$(({element:C})=>[y("div",Ll,[y("div",Ol,[x($e,{class:"h-3.5 cursor-grab"}),y("div",Ml,G(C.label),1)]),x(F,{variant:"ghost",class:"!size-4 rounded-sm",icon:"x",onClick:T=>a.fields.splice(a.fields.indexOf(C),1)},null,8,["onClick"])])]),_:2},1032,["list"]),l(M).data?(t(),v(Me,{key:0,value:"",options:l(M).data,onChange:C=>U(a,C)},{target:$(({togglePopover:C})=>[y("div",Bl,[x(F,{class:"w-full !h-8 !bg-surface-modal",variant:"outline",label:k.__("Add Field"),iconLeft:"plus",onClick:T=>C()},null,8,["label","onClick"])])]),"item-label":$(({option:C})=>[y("div",Ul,[y("div",null,G(C.label),1),y("div",Tl,G(`${C.fieldname} - ${C.fieldtype}`),1)])]),_:1},8,["options","onChange"])):R("",!0)])]),_:1},8,["list"])])]),_:2},1032,["list"]),y("div",Gl,[x(F,{class:"w-full h-8",variant:"subtle",label:k.__("Add Section"),iconLeft:"plus",onClick:u[4]||(u[4]=_=>f.tabs[n.value].sections.push({label:k.__("New Section"),name:"section_"+l(ie)(),opened:!0,columns:[{name:"column_"+l(ie)(),fields:[]}]}))},null,8,["label"])])])),[[Qe,n.value==r]])),128))])}}},El={class:"flex items-center gap-2 text-2xl font-semibold leading-6 text-ink-gray-9"},Il={class:"flex flex-col gap-3"},jl={class:"flex justify-between gap-2"},Al={class:"flex flex-row-reverse gap-2"},Jl={key:0},Yl={__name:"GridRowFieldsModal",props:ee({doctype:{type:String,default:"CRM Lead"},parentDoctype:{type:String,default:""}},{modelValue:{},modelModifiers:{}}),emits:ee(["reload"],["update:modelValue"]),setup(f,{emit:c}){const n=f,S=c,N=le(f,"modelValue"),D=E(n.doctype),M=E(!1),L=E(!1),U=E(!1);function O(){return{doctype:D.value,type:"Grid Row",parent_doctype:n.parentDoctype}}const w=_e({url:"crm.fcrm.doctype.crm_fields_layout.crm_fields_layout.get_fields_layout",cache:["GridRowFieldsModal",D.value,n.parentDoctype],params:O(),onSuccess(e){w.originalData=JSON.parse(JSON.stringify(e))}});Re(()=>w==null?void 0:w.data,()=>{L.value=JSON.stringify(w==null?void 0:w.data)!==JSON.stringify(w==null?void 0:w.originalData)},{deep:!0}),Xe(()=>Ze(k,100)());function k(){ge(()=>{w.params=O(),w.reload()})}function u(){let e=JSON.parse(JSON.stringify(w.data));e.forEach(F=>{F.sections&&F.sections.forEach(g=>{g.columns.forEach(d=>{d.fields&&(d.fields=d.fields.map(r=>r.fieldname))})})}),M.value=!0,ll("crm.fcrm.doctype.crm_fields_layout.crm_fields_layout.save_fields_layout",{doctype:D.value,type:"Grid Row",layout:JSON.stringify(e)}).then(()=>{M.value=!1,N.value=!1,tl("data_fields_layout_builder",{doctype:D.value}),S("reload")})}return(e,F)=>{const g=J("Button");return t(),v(l(Fe),{modelValue:N.value,"onUpdate:modelValue":F[1]||(F[1]=d=>N.value=d),options:{size:"4xl"}},{"body-title":$(()=>[y("h3",El,[y("div",null,G(e.__("Edit Grid Row Fields Layout")),1),L.value?(t(),v(l(el),{key:0,label:e.__("Not Saved"),variant:"subtle",theme:"orange"},null,8,["label"])):R("",!0)])]),"body-content":$(()=>{var d;return[y("div",Il,[y("div",jl,[x(g,{label:U.value?e.__("Hide preview"):e.__("Show preview"),onClick:F[0]||(F[0]=r=>U.value=!U.value)},null,8,["label"]),y("div",Al,[x(g,{loading:M.value,label:e.__("Save"),variant:"solid",onClick:u},null,8,["loading","label"]),x(g,{label:e.__("Reset"),onClick:k},null,8,["label"])])]),(d=l(w))!=null&&d.data?(t(),V("div",Jl,[U.value?(t(),v(Ue,{key:1,tabs:l(w).data,data:{},preview:!0},null,8,["tabs"])):(t(),v(Nl,{key:0,tabs:l(w).data,doctype:D.value},null,8,["tabs","doctype"]))])):R("",!0)])]}),_:1},8,["modelValue"])}}},Pl={class:"bg-surface-modal px-4 pb-6 pt-5 sm:px-6"},ql={class:"mb-5 flex items-center justify-between"},zl={class:"text-2xl font-semibold leading-6 text-ink-gray-9"},Hl={class:"flex items-center gap-1"},Kl={__name:"GridRowModal",props:ee({index:Number,data:Object,doctype:String,parentDoctype:String},{modelValue:{},modelModifiers:{},showGridRowFieldsModal:{},showGridRowFieldsModalModifiers:{}}),emits:["update:modelValue","update:showGridRowFieldsModal"],setup(f){const c=f,{isManager:n}=be(),S=le(f,"modelValue"),N=le(f,"showGridRowFieldsModal"),D=_e({url:"crm.fcrm.doctype.crm_fields_layout.crm_fields_layout.get_fields_layout",cache:["Grid Row",c.doctype,c.parentDoctype],params:{doctype:c.doctype,type:"Grid Row",parent_doctype:c.parentDoctype},auto:!0});function M(){N.value=!0,ge(()=>S.value=!1)}return(L,U)=>{const O=J("Button"),w=J("Dialog");return t(),v(w,{modelValue:S.value,"onUpdate:modelValue":U[1]||(U[1]=k=>S.value=k),options:{size:"4xl"}},{body:$(()=>[y("div",Pl,[y("div",ql,[y("div",null,[y("h3",zl,G(L.__("Editing Row {0}",[f.index+1])),1)]),y("div",Hl,[l(n)()?(t(),v(O,{key:0,tooltip:L.__("Edit fields layout"),variant:"ghost",class:"w-7",icon:ye,onClick:M},null,8,["tooltip"])):R("",!0),x(O,{icon:"x",variant:"ghost",class:"w-7",onClick:U[0]||(U[0]=k=>S.value=!1)})])]),y("div",null,[l(D).data?(t(),v(Ue,{key:0,tabs:l(D).data,data:f.data,doctype:f.doctype,isGridRow:!0},null,8,["tabs","data","doctype"])):R("",!0)])])]),_:1},8,["modelValue"])}}},Wl=E(!1),Ql=E(""),Xl=E({}),Zl=E(null);function Be(f,c,n,S){f&&(n==null||n(),Ql.value=f,Xl.value=c||{},Zl.value=S||null,Wl.value=!0)}const et={class:"flex flex-col flex-1 text-base"},lt={key:0,class:"mb-1.5 text-sm text-ink-gray-5"},tt={key:1,class:"rounded border border-outline-gray-modals"},at={class:"grid-header flex items-center rounded-t-[7px] bg-surface-gray-2 text-ink-gray-5 truncate"},nt={class:"inline-flex items-center justify-center border-r border-outline-gray-2 h-8 p-2 w-12"},ot={class:"inline-flex items-center justify-center border-r border-outline-gray-2 py-2 px-1 w-12"},st=["title"],it={key:0,class:"text-ink-red-2"},rt={class:"flex items-center justify-center w-12"},dt=["onClick"],ut={class:"grid-row-checkbox inline-flex h-9.5 items-center bg-surface-white justify-center border-r border-outline-gray-modals p-2 w-12"},ct={class:"flex h-9.5 items-center justify-center bg-surface-white border-r border-outline-gray-modals py-2 px-1 text-sm text-ink-gray-8 w-12"},mt={class:"cursor-pointer"},pt={key:3,class:"flex h-full bg-surface-white justify-center items-center"},vt={class:"edit-row flex items-center justify-center w-12"},ft={key:1,class:"flex flex-col items-center rounded p-5 text-sm text-ink-gray-5"},yt={key:2,class:"mt-2 flex flex-row gap-2"},gt={__name:"Grid",props:ee({label:{type:String,default:""},doctype:{type:String,required:!0},parentDoctype:{type:String,required:!0},parentFieldname:{type:String,required:!0},overrides:{type:Object,default:()=>({})}},{modelValue:{},modelModifiers:{},parent:{},parentModifiers:{}}),emits:["update:modelValue","update:parent"],setup(f){var ke;const c=f,n=q("triggerOnChange",()=>{}),S=q("triggerOnRowAdd",()=>{}),N=q("triggerOnRowRemove",()=>{}),{getGridViewSettings:D,getFields:M,getFloatWithPrecision:L,getCurrencyWithPrecision:U,getFormattedCurrency:O,getGridSettings:w}=re(c.doctype);re(c.parentDoctype);const{users:k,getUser:u}=be(),e=le(f,"modelValue"),F=le(f,"parent");H("parentDoc",F);const g=E(new Array(((ke=e.value)==null?void 0:ke.length)||[]).fill(!1)),d=al(new Set),r=E(!1),_=E(!1),s=j(()=>w()),a=j(()=>{let o=D(c.parentDoctype),h=M();return o.length?o.map(X=>T(h.find(P=>P.fieldname===X.fieldname))):(h==null?void 0:h.filter(B=>B.in_list_view).map(B=>T(B)))||[]}),C=j(()=>{var o;return((o=M())==null?void 0:o.map(h=>T(h)))||[]});function T(o){var B,X;return o.fieldtype==="Link"&&o.options!=="User"&&(o.create||(o.create=(P,se,m,z)=>{const i=b=>{b&&A(b.name,se,m)};Be(se.options,P,z,i)})),o.fieldtype==="Link"&&o.options==="User"&&(o.fieldtype="User",o.link_filters=JSON.stringify({...o.link_filters?JSON.parse(o.link_filters):{},name:["in",(B=k.data.crmUsers)==null?void 0:B.map(P=>P.name)]})),{...{...o,filters:o.link_filters&&JSON.parse(o.link_filters),placeholder:o.placeholder||o.label},...(X=c.overrides.fields)==null?void 0:X.find(P=>P.fieldname===o.fieldname)}}const p=j(()=>{var h;if(!((h=a.value)!=null&&h.length))return"1fr";let o=D(c.parentDoctype);return o.length?o.map(B=>`minmax(0, ${B.columns||2}fr)`).join(" "):a.value.map(()=>"minmax(0, 2fr)").join(" ")}),I=j(()=>{var o;return(o=e.value)!=null&&o.length?e.value.length===d.size:!1}),W=j(()=>d.size>0),Te=o=>{var h;o?(h=e.value)==null||h.forEach(B=>d.add(B.name)):d.clear()},Ge=o=>{d.has(o.name)?d.delete(o.name):d.add(o.name)},Ne=()=>{var h;const o={};(h=C.value)==null||h.forEach(B=>{B.fieldtype==="Check"?o[B.fieldname]=!1:o[B.fieldname]="",B.default&&(o[B.fieldname]=je(B.default,B.fieldtype))}),o.name=ie(10),g.value.push(!1),o.__islocal=!0,o.idx=e.value.length+1,o.doctype=c.doctype,o.parentfield=c.parentFieldname,o.parenttype=c.parentDoctype,e.value.push(o),S(o)},Ee=()=>{e.value=e.value.filter(o=>!d.has(o.name)),N(d,e.value),g.value.pop(),d.clear()},Ie=()=>{e.value.forEach((o,h)=>{o.idx=h+1})};function A(o,h,B){o=typeof o=="object"&&o!==null?o.value:o,n(h.fieldname,o,B)}function je(o,h){if(["Float","Currency","Percent"].includes(h))return Z(o);if(h==="Check"){if(["1","true","True"].includes(o))return!0;if(["0","false","False"].includes(o))return!1}else{if(h==="Int")return parseInt(o);if(o==="Today"&&h==="Date")return ne().format("YYYY-MM-DD");if(["Now","now"].includes(o)&&h==="Datetime")return ne().format("YYYY-MM-DD HH:mm:ss");if(["Now","now"].includes(o)&&h==="Time")return ne().format("HH:mm:ss");if(h==="Date")return ne(o).format("YYYY-MM-DD");if(h==="Datetime")return ne(o).format("YYYY-MM-DD HH:mm:ss");if(h==="Time")return ne(o).format("HH:mm:ss")}return o}const Ae=o=>Array.isArray(o)?o:typeof o=="string"?o.split(`
`).map(h=>({label:h,value:h})):[];return(o,h)=>{var X,P,se;const B=J("Button");return t(),V("div",et,[f.label?(t(),V("div",lt,G(o.__(f.label)),1)):R("",!0),(X=a.value)!=null&&X.length?(t(),V("div",tt,[y("div",at,[y("div",nt,[x(l(ve),{class:"cursor-pointer duration-300",modelValue:I.value,onClick:h[0]||(h[0]=K(m=>Te(m.target.checked),["stop"]))},null,8,["modelValue"])]),y("div",ot,G(o.__("No")),1),y("div",{class:"grid w-full truncate",style:Ce({gridTemplateColumns:p.value})},[(t(!0),V(te,null,ae(a.value,m=>(t(),V("div",{class:Y(["border-r border-outline-gray-2 p-2 truncate",["Int","Float","Currency","Percent"].includes(m.fieldtype)?"text-right":""]),key:m.fieldname,title:m.label},[pe(G(o.__(m.label))+" ",1),m.reqd||m.mandatory_depends_on&&m.mandatory_via_depends_on?(t(),V("span",it,"*")):R("",!0)],10,st))),128))],4),y("div",rt,[x(B,{tooltip:o.__("Edit grid fields"),class:"rounded !bg-surface-gray-2 border-0 !text-ink-gray-5",variant:"outline",icon:"settings",onClick:h[1]||(h[1]=m=>r.value=!0)},null,8,["tooltip"])])]),(P=e.value)!=null&&P.length?(t(),v(l(oe),{key:0,class:"w-full",modelValue:e.value,"onUpdate:modelValue":h[3]||(h[3]=m=>e.value=m),delay:l(He)()?200:0,group:"rows","item-key":"name",onEnd:Ie},{item:$(({element:m,index:z})=>[y("div",{class:"grid-row flex cursor-pointer items-center border-b border-outline-gray-modals bg-surface-modals last:rounded-b last:border-b-0",onClick:K(()=>{s.value.editable_grid||(g.value[z]=!0)},["stop"])},[y("div",ut,[x(l(ve),{class:"cursor-pointer duration-300",modelValue:d.has(m.name),onClick:K(i=>Ge(m),["stop"])},null,8,["modelValue","onClick"])]),y("div",ct,G(z+1),1),y("div",{class:"grid w-full h-9.5",style:Ce({gridTemplateColumns:p.value})},[(t(!0),V(te,null,ae(a.value,i=>(t(),V("div",{class:"border-r border-outline-gray-modals h-full",key:i.fieldname},[i.read_only&&!["Int","Float","Currency","Percent","Check"].includes(i.fieldtype)?(t(),v(l(ue),{key:0,type:"text",placeholder:i.placeholder,modelValue:m[i.fieldname],"onUpdate:modelValue":b=>m[i.fieldname]=b,disabled:!0},null,8,["placeholder","modelValue","onUpdate:modelValue"])):["Link","Dynamic Link"].includes(i.fieldtype)?(t(),v(de,{key:1,class:"text-sm text-ink-gray-8",value:m[i.fieldname],doctype:i.fieldtype=="Link"?i.options:m[i.options],filters:i.filters,onChange:b=>A(b,i,m),onCreate:(b,Je)=>i.create(o.v,i,m,Je)},null,8,["value","doctype","filters","onChange","onCreate"])):i.fieldtype==="User"?(t(),v(de,{key:2,class:"form-control",value:l(u)(m[i.fieldname]).full_name,doctype:i.options,filters:i.filters,onChange:b=>A(b,i,m),placeholder:i.placeholder,hideMe:!0},{prefix:$(()=>[x(ce,{class:"mr-2",user:m[i.fieldname],size:"sm"},null,8,["user"])]),"item-prefix":$(({option:b})=>[x(ce,{class:"mr-2",user:b.value,size:"sm"},null,8,["user"])]),"item-label":$(({option:b})=>[x(l(Le),{text:b.value},{default:$(()=>[y("div",mt,G(l(u)(b.value).full_name),1)]),_:2},1032,["text"])]),_:2},1032,["value","doctype","filters","onChange","placeholder"])):i.fieldtype==="Check"?(t(),V("div",pt,[x(l(ve),{class:"cursor-pointer duration-300",modelValue:m[i.fieldname],"onUpdate:modelValue":b=>m[i.fieldname]=b,disabled:!s.value.editable_grid,onChange:b=>A(b.target.checked,i,m)},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])])):i.fieldtype==="Date"?(t(),v(l(Se),{key:4,value:m[i.fieldname],"icon-left":"",variant:"outline",formatter:b=>l(me)(b,"",!0),"input-class":"border-none text-sm text-ink-gray-8",onChange:b=>A(b,i,m)},null,8,["value","formatter","onChange"])):i.fieldtype==="Datetime"?(t(),v(l(De),{key:5,value:m[i.fieldname],"icon-left":"",variant:"outline",formatter:b=>l(me)(b,"",!0,!0),"input-class":"border-none text-sm text-ink-gray-8",onChange:b=>A(b,i,m)},null,8,["value","formatter","onChange"])):["Small Text","Text","Long Text","Code"].includes(i.fieldtype)?(t(),v(l(ue),{key:6,rows:"1",type:"textarea",variant:"outline",value:m[i.fieldname],onChange:b=>A(b.target.value,i,m)},null,8,["value","onChange"])):i.fieldtype==="Select"?(t(),v(l(ue),{key:7,class:"text-sm text-ink-gray-8",type:"select",variant:"outline",modelValue:m[i.fieldname],"onUpdate:modelValue":b=>m[i.fieldname]=b,options:i.options,onChange:b=>A(b.target.value,i,m)},null,8,["modelValue","onUpdate:modelValue","options","onChange"])):i.fieldtype==="Password"?(t(),v(Ve,{key:8,variant:"outline",value:m[i.fieldname],disabled:!!i.read_only,onChange:b=>A(b.target.value,i,m)},null,8,["value","disabled","onChange"])):i.fieldtype==="Int"?(t(),v(Q,{key:9,class:"[&_input]:text-right",type:"text",variant:"outline",value:m[i.fieldname]||"0",disabled:!!i.read_only,onChange:b=>A(b.target.value,i,m)},null,8,["value","disabled","onChange"])):i.fieldtype==="Percent"?(t(),v(Q,{key:10,class:"[&_input]:text-right",type:"text",variant:"outline",value:l(L)(i.fieldname,m),formattedValue:(m[i.fieldname]||"0")+"%",disabled:!!i.read_only,onChange:b=>A(l(Z)(b.target.value),i,m)},null,8,["value","formattedValue","disabled","onChange"])):i.fieldtype==="Float"?(t(),v(Q,{key:11,class:"[&_input]:text-right",type:"text",variant:"outline",value:l(L)(i.fieldname,m),formattedValue:m[i.fieldname],disabled:!!i.read_only,onChange:b=>A(l(Z)(b.target.value),i,m)},null,8,["value","formattedValue","disabled","onChange"])):i.fieldtype==="Currency"?(t(),v(Q,{key:12,class:"[&_input]:text-right",type:"text",variant:"outline",value:l(U)(i.fieldname,m),formattedValue:l(O)(i.fieldname,m,F.value),disabled:!!i.read_only,onChange:b=>A(l(Z)(b.target.value),i,m)},null,8,["value","formattedValue","disabled","onChange"])):i.fieldtype==="Autocomplete"?(t(),v(l(Oe),{key:13,class:"combobox",modelValue:m[i.fieldname],"onUpdate:modelValue":[b=>m[i.fieldname]=b,b=>A(b,i,m)],variant:"outline",options:Ae(i.options),placeholder:i.placeholder,disabled:!!i.read_only},null,8,["modelValue","onUpdate:modelValue","options","placeholder","disabled"])):(t(),v(l(ue),{key:14,class:"text-sm text-ink-gray-8",type:"text",variant:"outline",modelValue:m[i.fieldname],"onUpdate:modelValue":b=>m[i.fieldname]=b,options:i.options,onChange:b=>A(b.target.value,i,m)},null,8,["modelValue","onUpdate:modelValue","options","onChange"]))]))),128))],4),y("div",vt,[x(B,{tooltip:o.__("Edit row"),class:"rounded border-0 !text-ink-gray-7",variant:"outline",icon:ye,onClick:i=>g.value[z]=!0},null,8,["tooltip","onClick"])]),g.value[z]?(t(),v(Kl,{key:0,modelValue:g.value[z],"onUpdate:modelValue":i=>g.value[z]=i,showGridRowFieldsModal:_.value,"onUpdate:showGridRowFieldsModal":h[2]||(h[2]=i=>_.value=i),index:z,data:m,doctype:f.doctype,parentDoctype:f.parentDoctype},null,8,["modelValue","onUpdate:modelValue","showGridRowFieldsModal","index","data","doctype","parentDoctype"])):R("",!0)],8,dt)]),_:1},8,["modelValue","delay"])):(t(),V("div",ft,G(o.__("No Data")),1))])):R("",!0),(se=a.value)!=null&&se.length?(t(),V("div",yt,[W.value?(t(),v(B,{key:0,label:o.__("Delete"),variant:"solid",theme:"red",onClick:Ee},null,8,["label"])):R("",!0),x(B,{label:o.__("Add Row"),onClick:Ne},null,8,["label"])])):R("",!0),_.value?(t(),v(Yl,{key:3,modelValue:_.value,"onUpdate:modelValue":h[4]||(h[4]=m=>_.value=m),doctype:f.doctype,parentDoctype:f.parentDoctype},null,8,["modelValue","doctype","parentDoctype"])):R("",!0),r.value?(t(),v(bl,{key:4,modelValue:r.value,"onUpdate:modelValue":h[5]||(h[5]=m=>r.value=m),doctype:f.doctype,parentDoctype:f.parentDoctype},null,8,["modelValue","doctype","parentDoctype"])):R("",!0)])}}},_t=he(gt,[["__scopeId","data-v-ad80316d"]]);const bt={key:0,class:"field"},ht={key:0,class:"mb-2 text-sm text-ink-gray-5"},kt={key:0,class:"text-ink-red-2"},xt={key:4,class:"flex items-center gap-2"},Ct={key:0,class:"text-ink-red-3"},wt={key:5,class:"flex gap-1"},Vt={class:"cursor-pointer"},$t={__name:"Field",props:{field:Object},setup(f){const c=f,n=q("data"),S=q("doctype"),N=q("preview"),D=q("isGridRow"),{getFormattedPercent:M,getFormattedFloat:L,getFormattedCurrency:U}=re(S),{users:O,getUser:w}=be();let k,u;if(D)k=q("triggerOnChange",()=>{}),u=q("parentDoc");else{const{triggerOnChange:s,triggerOnRowAdd:a,triggerOnRowRemove:C}=Ye(S,n.value.name);k=s,H("triggerOnChange",k),H("triggerOnRowAdd",a),H("triggerOnRowRemove",C)}const e=j(()=>{var C;let s=c.field;s.fieldtype=="Select"&&typeof s.options=="string"&&(s.options=s.options.split(`
`).map(T=>({label:T,value:T})),s.options[0].value!==""&&s.options.unshift({label:"",value:""})),s.fieldtype==="Link"&&s.options==="User"&&(s.fieldtype="User",s.link_filters=JSON.stringify({...s.link_filters?JSON.parse(s.link_filters):{},name:["in",(C=O.data.crmUsers)==null?void 0:C.map(T=>T.name)]})),s.fieldtype==="Link"&&s.options!=="User"&&(s.create||(s.create=(T,p)=>{const I=W=>{W&&r(W.name,s)};Be(s.options,T,p,I)}));let a={...s,filters:s.link_filters&&JSON.parse(s.link_filters),placeholder:s.placeholder||s.label,display_via_depends_on:xe(s.depends_on,n.value),mandatory_via_depends_on:xe(s.mandatory_depends_on,n.value)};return a.visible=F(a),a});function F(s){var T;if(N.value)return!0;const a=Number(((T=window.sysdefaults)==null?void 0:T.hide_empty_read_only_fields)??1),C=s.read_only&&(n.value[s.fieldname]||!a);return(s.fieldtype=="Check"||C||!s.read_only)&&(!s.depends_on||s.display_via_depends_on)&&!s.hidden}const g=s=>s.placeholder?__(s.placeholder):["Select","Link"].includes(s.fieldtype)?__("Select {0}",[__(s.label)]):__("Enter {0}",[__(s.label)]),d=s=>Array.isArray(s)?s:typeof s=="string"?s.split(`
`).map(a=>({label:a,value:a})):[];function r(s,a){s=typeof s=="object"&&s!==null?s.value:s,D?k(a.fieldname,s,n.value):k(a.fieldname,s)}function _(s,a){return a.fieldtype==="Duration"?s||0:s}return(s,a)=>{const C=J("FormControl"),T=J("Button");return e.value.visible?(t(),V("div",bt,[e.value.fieldtype!="Check"?(t(),V("div",ht,[pe(G(s.__(e.value.label))+" ",1),e.value.reqd||e.value.mandatory_depends_on&&e.value.mandatory_via_depends_on?(t(),V("span",kt,"*")):R("",!0)])):R("",!0),e.value.read_only&&!["Int","Float","Currency","Percent","Check"].includes(e.value.fieldtype)?(t(),v(C,{key:1,type:"text",placeholder:g(e.value),modelValue:l(n)[e.value.fieldname],"onUpdate:modelValue":a[0]||(a[0]=p=>l(n)[e.value.fieldname]=p),disabled:!0,description:e.value.description},null,8,["placeholder","modelValue","description"])):e.value.fieldtype==="Table"?(t(),v(_t,{key:2,modelValue:l(n)[e.value.fieldname],"onUpdate:modelValue":a[1]||(a[1]=p=>l(n)[e.value.fieldname]=p),parent:l(n),"onUpdate:parent":a[2]||(a[2]=p=>nl(n)?n.value=p:null),doctype:e.value.options,parentDoctype:l(S),parentFieldname:e.value.fieldname},null,8,["modelValue","parent","doctype","parentDoctype","parentFieldname"])):e.value.fieldtype==="Select"?(t(),v(C,{key:3,type:"select",class:Y(["form-control",e.value.prefix?"prefix":""]),options:e.value.options,modelValue:l(n)[e.value.fieldname],"onUpdate:modelValue":a[3]||(a[3]=p=>l(n)[e.value.fieldname]=p),onChange:a[4]||(a[4]=p=>r(p.target.value,e.value)),placeholder:g(e.value),description:e.value.description},ol({_:2},[e.value.prefix?{name:"prefix",fn:$(()=>[x(ze,{class:Y(e.value.prefix)},null,8,["class"])]),key:"0"}:void 0]),1032,["class","options","modelValue","placeholder","description"])):e.value.fieldtype=="Check"?(t(),V("div",xt,[x(C,{class:"form-control",type:"checkbox",modelValue:l(n)[e.value.fieldname],"onUpdate:modelValue":a[5]||(a[5]=p=>l(n)[e.value.fieldname]=p),onChange:a[6]||(a[6]=p=>r(p.target.checked,e.value)),disabled:!!e.value.read_only,description:e.value.description},null,8,["modelValue","disabled","description"]),y("label",{class:"text-sm text-ink-gray-5",onClick:a[7]||(a[7]=()=>{e.value.read_only||(l(n)[e.value.fieldname]=!l(n)[e.value.fieldname])})},[pe(G(s.__(e.value.label))+" ",1),e.value.mandatory?(t(),V("span",Ct,"*")):R("",!0)])])):["Link","Dynamic Link"].includes(e.value.fieldtype)?(t(),V("div",wt,[x(de,{class:"form-control flex-1 truncate",value:l(n)[e.value.fieldname],doctype:e.value.fieldtype=="Link"?e.value.options:l(n)[e.value.options],filters:e.value.filters,onChange:a[8]||(a[8]=p=>r(p,e.value)),placeholder:g(e.value),onCreate:e.value.create},null,8,["value","doctype","filters","placeholder","onCreate"]),l(n)[e.value.fieldname]&&e.value.edit?(t(),v(T,{key:0,class:"shrink-0",label:s.__("Edit"),iconLeft:ye,onClick:a[9]||(a[9]=p=>e.value.edit(l(n)[e.value.fieldname]))},null,8,["label"])):R("",!0)])):e.value.fieldtype==="Table MultiSelect"?(t(),v(dl,{key:6,modelValue:l(n)[e.value.fieldname],"onUpdate:modelValue":a[10]||(a[10]=p=>l(n)[e.value.fieldname]=p),doctype:e.value.options,onChange:a[11]||(a[11]=p=>r(p,e.value))},null,8,["modelValue","doctype"])):e.value.fieldtype==="User"?(t(),v(de,{key:7,class:"form-control",value:l(n)[e.value.fieldname]&&l(w)(l(n)[e.value.fieldname]).full_name,doctype:e.value.options,filters:e.value.filters,onChange:a[12]||(a[12]=p=>r(p,e.value)),placeholder:g(e.value),hideMe:!0},{prefix:$(()=>[l(n)[e.value.fieldname]?(t(),v(ce,{key:0,class:"mr-2",user:l(n)[e.value.fieldname],size:"sm"},null,8,["user"])):R("",!0)]),"item-prefix":$(({option:p})=>[x(ce,{class:"mr-2",user:p.value,size:"sm"},null,8,["user"])]),"item-label":$(({option:p})=>[x(l(Le),{text:p.value},{default:$(()=>[y("div",Vt,G(l(w)(p.value).full_name),1)]),_:2},1032,["text"])]),_:1},8,["value","doctype","filters","placeholder"])):e.value.fieldtype==="Autocomplete"?(t(),v(l(Oe),{key:8,modelValue:l(n)[e.value.fieldname],"onUpdate:modelValue":[a[13]||(a[13]=p=>l(n)[e.value.fieldname]=p),a[14]||(a[14]=p=>r(p,e.value,l(n)))],options:d(e.value.options),placeholder:g(e.value),disabled:!!e.value.read_only},null,8,["modelValue","options","placeholder","disabled"])):e.value.fieldtype==="Datetime"?(t(),v(l(De),{key:9,value:l(n)[e.value.fieldname],formatter:p=>l(me)(p,"",!0,!0),placeholder:g(e.value),"input-class":"border-none",onChange:a[15]||(a[15]=p=>r(p,e.value))},null,8,["value","formatter","placeholder"])):e.value.fieldtype==="Date"?(t(),v(l(Se),{key:10,value:l(n)[e.value.fieldname],formatter:p=>l(me)(p,"",!0),placeholder:g(e.value),"input-class":"border-none",onChange:a[16]||(a[16]=p=>r(p,e.value))},null,8,["value","formatter","placeholder"])):["Small Text","Text","Long Text","Code"].includes(e.value.fieldtype)?(t(),v(C,{key:11,type:"textarea",value:l(n)[e.value.fieldname],placeholder:g(e.value),description:e.value.description,onChange:a[17]||(a[17]=p=>r(p.target.value,e.value))},null,8,["value","placeholder","description"])):e.value.fieldtype==="Password"?(t(),v(Ve,{key:12,value:l(n)[e.value.fieldname],placeholder:g(e.value),description:e.value.description,onChange:a[18]||(a[18]=p=>r(p.target.value,e.value))},null,8,["value","placeholder","description"])):e.value.fieldtype==="Int"?(t(),v(Q,{key:13,type:"text",placeholder:g(e.value),value:l(n)[e.value.fieldname]||"0",disabled:!!e.value.read_only,description:e.value.description,onChange:a[19]||(a[19]=p=>r(p.target.value,e.value))},null,8,["placeholder","value","disabled","description"])):e.value.fieldtype==="Percent"?(t(),v(Q,{key:14,type:"text",value:l(M)(e.value.fieldname,l(n)),placeholder:g(e.value),disabled:!!e.value.read_only,description:e.value.description,onChange:a[20]||(a[20]=p=>r(l(Z)(p.target.value),e.value))},null,8,["value","placeholder","disabled","description"])):e.value.fieldtype==="Float"?(t(),v(Q,{key:15,type:"text",value:l(L)(e.value.fieldname,l(n)),placeholder:g(e.value),disabled:!!e.value.read_only,description:e.value.description,onChange:a[21]||(a[21]=p=>r(l(Z)(p.target.value),e.value))},null,8,["value","placeholder","disabled","description"])):e.value.fieldtype==="Currency"?(t(),v(Q,{key:16,type:"text",value:l(U)(e.value.fieldname,l(n),l(u)),placeholder:g(e.value),disabled:!!e.value.read_only,description:e.value.description,onChange:a[22]||(a[22]=p=>r(l(Z)(p.target.value),e.value))},null,8,["value","placeholder","disabled","description"])):(t(),v(C,{key:17,type:"text",placeholder:g(e.value),value:_(l(n)[e.value.fieldname],e.value),disabled:!!e.value.read_only,description:e.value.description,onChange:a[23]||(a[23]=p=>r(p.target.value,e.value))},null,8,["placeholder","value","disabled","description"]))])):R("",!0)}}},St=he($t,[["__scopeId","data-v-5eeb94f0"]]),Dt={class:"column flex flex-col gap-4 w-full"},Ft={key:0,class:"text-ink-gray-9 max-w-fit text-base"},Rt={__name:"Column",props:{column:Object},setup(f){return(c,n)=>(t(),V("div",Dt,[f.column.label&&!f.column.hideLabel?(t(),V("div",Ft,G(f.column.label),1)):R("",!0),(t(!0),V(te,null,ae(f.column.fields,S=>(t(),v(St,{key:S.fieldname,field:S,"data-name":S.fieldname},null,8,["field","data-name"]))),128))]))}},Lt={__name:"Section",props:{section:Object},setup(f){const c=q("hasTabs");return(n,S)=>f.section.hidden?R("",!0):(t(),V("div",{key:0,class:Y(["section",[f.section.hideBorder?"pt-4":"border-t border-outline-gray-modals mt-5 pt-5"]])},[x(Pe,{class:Y(["flex sm:flex-row flex-col gap-4 text-lg font-medium",{"px-3 sm:px-5":l(c)}]),labelClass:["text-lg font-medium",{"px-3 sm:px-5":l(c)}],label:f.section.label,hideLabel:f.section.hideLabel||!f.section.label,opened:f.section.opened,collapsible:f.section.collapsible,collapseIconPosition:"right"},{default:$(()=>[(t(!0),V(te,null,ae(f.section.columns,N=>(t(),v(Rt,{key:N.name,class:Y({"mt-6":f.section.label&&!f.section.hideLabel}),column:N,"data-name":N.name},null,8,["class","column","data-name"]))),128))]),_:1},8,["class","labelClass","label","hideLabel","opened","collapsible"])],2))}};const Ot={__name:"FieldLayout",props:{tabs:Array,data:Object,doctype:{type:String,default:"CRM Lead"},isGridRow:{type:Boolean,default:!1},preview:{type:Boolean,default:!1}},setup(f){const c=f,n=E(0),S=j(()=>c.tabs.length>1||c.tabs.length==1&&c.tabs[0].label);return H("data",j(()=>c.data)),H("hasTabs",S),H("doctype",c.doctype),H("preview",c.preview),H("isGridRow",c.isGridRow),(N,D)=>(t(),V("div",{class:Y(["flex flex-col",{"border border-outline-gray-1 rounded-lg":S.value,"border-outline-gray-modals":S.value}])},[x(l(qe),{as:"div",modelValue:n.value,"onUpdate:modelValue":D[0]||(D[0]=M=>n.value=M),tabs:f.tabs,class:Y(S.value?"":"[&_[role='tablist']]:hidden")},{"tab-panel":$(({tab:M})=>[y("div",{class:Y(["sections overflow-hidden",{"my-4 sm:my-5":S.value}])},[(t(!0),V(te,null,ae(M.sections,L=>(t(),v(Lt,{key:L.name,section:L,"data-name":L.name},null,8,["section","data-name"]))),128))],2)]),_:1},8,["modelValue","tabs","class"])],2))}},Ue=he(Ot,[["__scopeId","data-v-92090992"]]);export{Ue as F,_t as G,Nl as _,Ql as a,Xl as b,Be as c,Zl as d,Wl as s};
//# sourceMappingURL=FieldLayout-69566732.js.map
